import paramiko
import os

#list of IPs
IPs= ["10.150.118.18"]
for ip in IPs:
    # try:
    path = '/device_backups/'
    ssh = paramiko.SSHClient()
    ssh.set_missing_host_key_policy(paramiko.AutoAddPolicy())
    ssh.connect(hostname=ip,username='rwadmin',password='Pr0jeCt@2018!',port=9052)
    sftp_cient=ssh.open_sftp()


    ips=["10.150.117.26.2022-04-07-1231", "10.150.117.27.2022-04-07-1231", "10.150.117.28.2022-04-07-1231",
         "10.150.117.30.2022-04-07-1231", "10.150.117.45.2022-04-07-1231", "10.150.117.46.2022-04-07-1231",
         "10.150.118.10.2022-04-07-1231", "10.150.118.11.2022-04-07-1231", "10.150.118.13.2022-04-07-1231",
         "10.150.118.20.2022-04-07-1231", "10.150.118.22.2022-04-07-1231", "10.150.118.28.2022-04-07-1231",
         "10.150.90.242.2022-04-07-1231", "10.150.95.50.2022-04-07-1231", "10.150.95.6.2022-04-07-1231",
         "10.150.95.86.2022-04-07-1231", "10.150.96.13.2022-04-07-1231", "10.150.96.145.2022-04-07-1231",
         "10.150.96.146.2022-04-07-1231", "10.150.96.161.2022-04-07-1231", "10.150.96.183.2022-04-07-1231",
         "10.150.96.19.2022-04-07-1231", "10.150.96.194.2022-04-07-1231", "10.150.96.199.2022-04-07-1231",
         "10.150.96.52.2022-04-07-1231", "10.150.96.62.2022-04-07-1231", "10.150.96.63.2022-04-07-1231",
         "10.150.96.64.2022-04-07-1231", "10.150.96.65.2022-04-07-1231", "10.250.10.2.2022-04-07-1231"]
    for i in ips:

        file_path="/home/rwadmin/device_backups/"+i+".txt"

        print(file_path)
        sftp_cient.get(file_path,i)

    sftp_cient.close()
    ssh.close()
    print("Sucess : ", ip)
    # except:
    #     print("There is a problem : ", ip)


